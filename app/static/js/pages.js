// Generated by CoffeeScript 1.6.3
var PagesCtrl;

PagesCtrl = function($scope, $resource, $rootScope) {
  var page_update;
  page_update = path.match(/^\/admin\/pages\/update\/?$/i);
  $scope.module = "pages";
  $scope.menu_language = false;
  $scope.code_language = $rootScope.lan;
  $scope.name_language = $rootScope.language;
  $scope.list_labels = [];
  if (page_update) {
    $scope.ajaxHashTableList.get(params, function(resource) {
      $rootScope.loader = false;
      $rootScope.items_list = resource.hash_map_list;
      return $scope.show_hash_map_list = true;
    });
  } else {
    $scope.page = {
      "name": "",
      "from": "",
      "import": "",
      "url": {
        "it": "",
        "en": ""
      },
      "title": {
        "it": "",
        "en": ""
      },
      "description": {
        "it": "",
        "en": ""
      },
      "content": {
        "it": "",
        "en": ""
      },
      "file": "",
      "labels": []
    };
  }
  $("[data-toggle=dropdown]").blur(function() {
    return $scope.menu_language = false;
  });
  $scope.menu_reveal = function() {
    return $scope.menu_language = !$scope.menu_language;
  };
  $scope.change_language = function(code, name_language) {
    $scope.code_language = code;
    $scope.name_language = name_language;
    return $scope.menu_reveal();
  };
  $scope.add_label = function() {
    var label;
    label = {
      "type": "text",
      "label": "",
      "alias": "",
      "value": ""
    };
    return $scope.page.labels.push(label);
  };
  return $scope.remove_label = function(index) {
    return $scope.page.labels.splice(index, 1);
  };
};

PagesCtrl.$inject = ["$scope", "$resource", "$rootScope"];
